"use strict";(self.webpackChunkphotokrafft_com=self.webpackChunkphotokrafft_com||[]).push([[747],{18430:function(e,n,t){t.d(n,{Z:function(){return m}});var i=t(1413),o=t(45987),r=t(5289),a=t(65661),s=t(39157),l=t(97123),c=t(36151),d=t(80184),u=["title","content","action","open","onClose"];function m(e){var n=e.title,t=e.content,m=e.action,h=e.open,g=e.onClose,f=(0,o.Z)(e,u);return(0,d.jsxs)(r.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,maxWidth:"xs",open:h,onClose:g},f),{},{children:[(0,d.jsx)(a.Z,{sx:{pb:2},children:n}),t&&(0,d.jsxs)(s.Z,{sx:{typography:"body2"},children:[" ",t," "]}),(0,d.jsxs)(l.Z,{children:[m,(0,d.jsx)(c.Z,{variant:"outlined",color:"inherit",onClick:g,children:"Cancel"})]})]}))}},92747:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var i=t(1413),o=t(29439),r=t(6907);t(3431);var a=t(72791),s=t(39709),l=t(57689),c=t(11087),d=t(91614),u=t(36151),m=t(57621),h=t(39281),g=t(20068),f=t(13400),p=t(79836),x=t(53382),Z=t(61889),v=t(48550),j=t(30829),w=t(20890),C=t(67303),P=t(738),A=t(74319),S=t(72422),b=t(73379),k=t(18430),y=t(35855),R=t(53994),L=t(94454),_=t(53767),D=t(50533),T=t(9955),W=t(38820),B=t(42142),N=(t(7870),t(1695),t(58008)),E=(t(229),t(56488)),I=t(84864),F=t(4034),z=t(70188),J=t(80184);function O(e){var n=e.row,t=e.selected,i=e.onSelectRow,r=(e.onDeleteRow,e.onEditRow),s=e.onViewRow,l=n.id,c=n.name,d=n.img,u=n.created_at,m=n.status,h=(0,a.useState)(!1),g=(0,o.Z)(h,2),p=(g[0],g[1],(0,a.useState)(null)),x=(0,o.Z)(p,2),Z=(x[0],x[1],(0,F.I0)());return(0,J.jsxs)(y.Z,{hover:!0,selected:t,children:[(0,J.jsx)(R.Z,{padding:"checkbox",children:(0,J.jsx)(L.Z,{checked:t,onClick:i})}),(0,J.jsx)(R.Z,{children:(0,J.jsxs)(_.Z,{direction:"row",alignItems:"center",spacing:2,children:[(0,J.jsx)(N.Z,{disabledEffect:!0,visibleByDefault:!0,alt:c,src:d,sx:{borderRadius:1.5,width:48,height:48}}),(0,J.jsx)(D.Z,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:s,sx:{cursor:"pointer"},children:c})]})}),(0,J.jsx)(R.Z,{children:(0,B.Mu)(u)}),(0,J.jsxs)(R.Z,{align:"right",children:[(0,J.jsx)(f.Z,{color:"error",onClick:function(){var e=C.Am.loading("Please wait...");E.h.productApi.Delete(l).then((function(n){if(n.data.code===z.hn.created)return Z((0,I.lJ)()),C.Am.update(e,{render:n.data.message,type:"success",isLoading:!1}),void setTimeout((function(){C.Am.dismiss(e)}),5e3);C.Am.update(e,{render:n.data.message,type:"error",isLoading:!1}),setTimeout((function(){C.Am.dismiss(e)}),5e3)})).catch((function(n){console.log(n),C.Am.update(e,{render:"some thing went wrong",type:"error",isLoading:!1}),setTimeout((function(){C.Am.dismiss(e)}),5e3)}))},children:(0,J.jsx)(A.Z,{icon:"eva:trash-2-outline"})}),(0,J.jsx)(f.Z,{color:"warning",onClick:function(){return r()},children:(0,J.jsx)(W.Z,{})}),(0,J.jsx)(T.Z,{checked:m,onChange:function(){return E.h.productApi.status(l,{status:!m},(function(){Z((0,I.lJ)())}))}})]})]})}t(18829);var q=t(38072),K=t(4809),M=[{id:"name",label:"Product",align:"left"},{id:"",label:"Created at",align:"left"},{id:""}],Q={name:"",min_page:"",boxandsleeve:!0,img:""};var U=function(){var e=(0,P.x6)({defaultOrderBy:"createdAt"}),n=e.dense,t=e.page,y=e.order,R=e.orderBy,L=e.rowsPerPage,_=e.setPage,D=e.selected,T=e.setSelected,W=(e.onSelectRow,e.onSelectAllRows),B=e.onSort,N=e.onChangeDense,U=e.onChangePage,V=e.onChangeRowsPerPage,Y=(0,K.K$)().themeStretch,$=(0,l.s0)(),G=(0,F.I0)(),H=(0,F.v9)((function(e){return e.resource})).product,X=(0,a.useState)([]),ee=(0,o.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,a.useState)(Q),oe=(0,o.Z)(ie,2),re=oe[0],ae=oe[1],se=(0,a.useState)(""),le=(0,o.Z)(se,2),ce=le[0],de=(le[1],(0,a.useState)([])),ue=(0,o.Z)(de,2),me=ue[0],he=(ue[1],(0,a.useState)(!1)),ge=(0,o.Z)(he,2),fe=ge[0],pe=ge[1],xe=(0,a.useState)(!1),Ze=(0,o.Z)(xe,2),ve=Ze[0],je=Ze[1];(0,a.useEffect)((function(){null!==H&&void 0!==H&&H.length&&te(H)}),[H]);var we=function(e){var n=e.inputData,t=e.comparator,i=e.filterName,o=e.filterStatus,r=n.map((function(e,n){return[e,n]}));r.sort((function(e,n){var i=t(e[0],n[0]);return 0!==i?i:e[1]-n[1]})),n=r.map((function(e){return e[0]})),i&&(n=n.filter((function(e){return-1!==e.name.toLowerCase().indexOf(i.toLowerCase())})));o.length&&(n=n.filter((function(e){return o.includes(e.inventoryType)})));return n}({inputData:ne,comparator:(0,P.sQ)(y,R),filterName:ce,filterStatus:me}),Ce=we.slice(t*L,t*L+L),Pe=n?60:80,Ae=!we.length&&!!ce,Se=function(){pe(!0)},be=function(e){$(q.vB.products.productEdit(e))};return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(r.ql,{children:(0,J.jsx)("title",{children:" Product List | Photokraft"})}),(0,J.jsxs)(d.Z,{maxWidth:!Y&&"lg",children:[(0,J.jsx)(b.Z,{heading:"Product List",links:[{name:"Dashboard",href:q.vB.dashbord},{name:"Product List"}],action:(0,J.jsx)(u.Z,{component:c.rU,onClick:function(){return Se()},variant:"contained",startIcon:(0,J.jsx)(A.Z,{icon:"eva:plus-fill"}),children:"New Product"})}),(0,J.jsxs)(m.Z,{children:[(0,J.jsxs)(h.Z,{sx:{position:"relative",overflow:"unset"},children:[(0,J.jsx)(P.Z4,{dense:n,numSelected:D.length,rowCount:ne.length,onSelectAllRows:function(e){return W(e,ne.map((function(e){return e.id})))},action:(0,J.jsx)(g.Z,{title:"Delete",children:(0,J.jsx)(f.Z,{color:"primary",onClick:Se,children:(0,J.jsx)(A.Z,{icon:"eva:trash-2-outline"})})})}),(0,J.jsx)(S.Z,{children:(0,J.jsxs)(p.Z,{size:n?"small":"medium",sx:{minWidth:960},children:[(0,J.jsx)(P.K,{order:y,orderBy:R,headLabel:M,rowCount:ne.length,numSelected:D.length,onSort:B,onSelectAllRows:function(e){return W(e,ne.map((function(e){return e.id})))}}),(0,J.jsxs)(x.Z,{children:[null===H||void 0===H?void 0:H.slice(t*L,t*L+L).map((function(e,n){return e&&(0,J.jsx)(O,{row:e,onViewRow:function(){return be(e.id)},onDeleteRow:function(){return function(e){var n=ne.filter((function(n){return n.id!==e}));T([]),te(n),t>0&&Ce.length<2&&_(t-1)}(e.id)},onEditRow:function(){return be(e.id)}},e.id)})),(0,J.jsx)(P.$W,{height:Pe,emptyRows:(0,P.fQ)(t,L,ne.length)}),(0,J.jsx)(P.et,{isNotFound:Ae})]})]})})]}),(0,J.jsx)(P.S_,{count:we.length,page:t,rowsPerPage:L,onPageChange:U,onRowsPerPageChange:V,dense:n,onChangeDense:N})]})]}),(0,J.jsx)(k.Z,{open:fe,onClose:function(){pe(!1)},title:"Create New Product",content:(0,J.jsxs)(Z.ZP,{spacing:3,children:[(0,J.jsx)(v.Z,{sx:{marginY:2},onChange:function(e){je((0,i.Z)((0,i.Z)({},ve),{},{name:!1})),ae((0,i.Z)((0,i.Z)({},re),{},{name:e.target.value}))},label:"Product Name",error:null===ve||void 0===ve?void 0:ve.name,fullWidth:!0}),(0,J.jsx)(v.Z,{sx:{marginY:2},onChange:function(e){je((0,i.Z)((0,i.Z)({},ve),{},{min_page:!1})),ae((0,i.Z)((0,i.Z)({},re),{},{min_page:e.target.value}))},label:"Minnimum Page",error:null===ve||void 0===ve?void 0:ve.min_page,fullWidth:!0}),(0,J.jsx)(j.Z,{sx:{color:"#777",marginBottom:".5em",marginTop:"1em",fontSize:".75em",display:"block"},children:"Upload Product Image"}),(0,J.jsx)(v.Z,{error:null===ve||void 0===ve?void 0:ve.img,type:"file",onChange:function(e){je((0,i.Z)((0,i.Z)({},ve),{},{img:!1})),ae((0,i.Z)((0,i.Z)({},re),{},{img:e.target.files[0]}))},fullWidth:!0}),(0,J.jsx)(w.Z,{variant:"caption",color:"error",children:"Please upload 800 x 800 px size image"})]}),action:(0,J.jsx)(s.Z,{variant:"contained",onClick:function(){return function(){var e=C.Am.loading("Please wait..."),n={};if(null!==re&&void 0!==re&&re.name||(n.name="Please select name"),null!==re&&void 0!==re&&re.img||(n.img="Please select img"),null!==re&&void 0!==re&&re.min_page||(n.min_page="Please select minimum page"),Object.keys(n).length>0)return je(n),C.Am.update(e,{render:"Required Field *",type:"error",isLoading:!1}),void setTimeout((function(){C.Am.dismiss(e)}),5e3);var t=new FormData;t.append("name",re.name),t.append("img",re.img),t.append("min_page",re.min_page),t.append("boxandsleeve",re.boxandsleeve),E.h.productApi.Create(t).then((function(n){if(n.data.code===z.hn.created)return G((0,I.lJ)()),ae(Q),je({}),pe(!fe),C.Am.update(e,{render:n.data.message,type:"success",isLoading:!1}),void setTimeout((function(){C.Am.dismiss(e)}),5e3);C.Am.update(e,{render:n.data.message,type:"error",isLoading:!1}),setTimeout((function(){C.Am.dismiss(e)}),5e3)})).catch((function(n){console.log(n),C.Am.update(e,{render:"some thing went wrong",type:"error",isLoading:!1}),setTimeout((function(){C.Am.dismiss(e)}),5e3)}))}()},children:"Create"})})]})}}}]);
//# sourceMappingURL=747.7f15ba7c.chunk.js.map